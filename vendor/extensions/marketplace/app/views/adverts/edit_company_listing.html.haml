-#%script{:type => 'text/javascript', :src => 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'}
%script{:type => 'text/javascript', :src => '/jquery-1.6.2.min.js'}
%script{:type => 'text/javascript', :src => '/select2.min.js'}
%h1 Your Company Listing

-form_for @company_listing, :html => {:multipart => true} do |f|
  =f.error_messages
  =f.hidden_field :is_company_listing
  -f.fields_for :reader do |rf|
    =f.label :Region
    =select_tag 'advert[reader_attributes][region]', options_for_select(Advert::REGIONS, rf.object.region)
    %p
      =rf.label :company_name
      %br
      =rf.text_field :name
    %p
      =rf.label :contact_person
      %br
      =rf.text_field :contact_person
    %p
      =label_tag 'Phone'
      %br
      =rf.text_field :phone
    %p
      =rf.label :fax
      %br
      =rf.text_field :fax
    %p
      =rf.label :mobile
      %br
      =rf.text_field :mobile
    %p
      =rf.label :email
      %br
      =rf.text_field :email
    %p
      =label_tag 'Postal Address'
      %br
      =rf.text_field :billing_address_1
      %br
      =rf.text_field :billing_address_2
      %br
      =rf.text_field :billing_address_3
      %br
      =rf.text_field :billing_address_4
      %br
      Postcode:
      =rf.text_field :billing_postcode
    %p
      =label_tag 'Physical Address'
      %br
      =rf.text_field :address_1
      %br
      =rf.text_field :address_2
      %br
      =rf.text_field :address_3
      %br
      =rf.text_field :address_4
      %br
      Postcode:
      =rf.text_field :postcode

  %p
    =f.label :website
    %br
    =f.text_field :website

  %p
    =f.label :business_description
    %br
    =f.text_area :business_description

  %p
    =f.label :timber_species
    %br
    =f.hidden_field :timber_species, :style => 'width: 300px'

  %p
    =f.label :timber_for_sale
    %br
    =f.hidden_field :timber_for_sale, :style => 'width: 300px'

  %p
    =f.label :buyer_of
    %br
    =f.hidden_field :buyer_of,  :style => 'width: 300px'

  %p
    =f.label :supplier_of
    %br
    =f.hidden_field :supplier_of,  :style => 'width: 300px'

  %p
    =f.label :services
    %br
    =f.hidden_field :services, :style => 'width: 300px'

  %p
    =f.label :image
    %br
    =f.file_field :image

  %p
    =f.submit

:javascript
  $('#advert_timber_species').select2({tags: #{Advert.timber_species_options.to_json}})
  $('#advert_timber_for_sale').select2({tags: #{Advert.timber_for_sale_options.to_json}})
  $('#advert_buyer_of').select2({tags: #{Advert.timber_species_options.to_json}})
  $('#advert_supplier_of').select2({tags: #{Advert.timber_species_options.to_json}})
  $('#advert_services').select2({tags: #{Advert.timber_species_options.to_json}})
